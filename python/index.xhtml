
<html>
  <head>
    <title>Move Mouse Camera</title>
    <style>
      #pointer {
        background: #FFF;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        position: absolute;
      }

      .wrap {
        width: 100%;
        height: 100%;
        overflow:auo;
      }

      .fleft {
        float:left; 
        width: 50%;
        background:#3498db;
        height: 80%;
      }

      .fright {
        float: right;
        background:#9b59b6;
        height: 80%;
        width: 50%;
      }


    </style>
  </head>

  <body>
    <div id="pointer"></div>
    <div class="wrap">
      <div id="left" class="fleft"></div>
      <div id="right" class="fright"></div>
    </div>
  </body>

  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  
  <script>

    function css( element, property ) {
      return window.getComputedStyle( element, null ).getPropertyValue( property );
    }

    function translate( elem, x, y ) {
      var left = parseInt( css( elem, 'left' ), 10 ),
        top = parseInt( css( elem, 'top' ), 10 ),
        dx = left - x,
        dy = top - y,
        i = 1,
        count = 16,
        delay = 5;
      
      function loop() {
          if ( i >= count ) { return; }
          i += 1;
          elem.style.left = ( left - ( dx * i / count ) ).toFixed( 0 ) + 'px';
          elem.style.top = ( top - ( dy * i / count ) ).toFixed( 0 ) + 'px';
          setTimeout( loop, delay );
      }
      
      loop();
    }

    // http://stackoverflow.com/questions/7454983/javascript-smooth-animation-from-x-y-to-x1-y1
  </script>

  <script>
    var mqttHost = 'localhost'; 
    var mqttPort = 9001;
    var client  = mqtt.connect('mqtt://' + mqttHost + ':' + mqttPort);
    var pointer = document.getElementById('pointer');
    var left = document.getElementById('left');
    var right = document.getElementById('right');
    
    client.subscribe('position');
   
    pointer.style.position = "absolute";

    client.on('message', function (topic, messageStr) {
      var position = JSON.parse(messageStr.toString());
      translate(pointer, position.x, position.y);
      if(position.x >= screen.width/2){ //right
        right.style.background = '#8e44ad';
        left.style.background = '#3498db';
      } else {
        left.style.background = '#2980b9';
        right.style.background = '#9b59b6';
      }
    });

  </script>
</html>
